server:
  default:
    DEBUG: true
    INDY_GENESIS_PATH: /opt/app-root/.genesis
    TOB_API_URL: http://api:8080
    VERSION: 0.5.8

    WALLET_SEED_PSPC: pspc-ab-sri000000000000000000000
    WALLET_SEED_CISD: pspc-cisd-sri0000000000000000000
    WALLET_SEED_INAC: aandc-inac0000000000000000000000

issuers:
  SRI-REG:
    jurisdiction:
       name: Public Services and Procurement Canada
       abbreviation: PSPC
       # url: https://canada.ca/organizations/tpsgc-pspc

    name: Acquisitions Branch
    abbreviation: AB
    url: "https://www.canada.ca/en/public-services-procurement.html"

    wallet_seed: $WALLET_SEED_PSPC
    claim_types:

    - description: Vendor Credential
      schema:
        name: pspc-sri.gc-vendor-credential
        version: 1.0.5
        attributes:
        - legal_entity_id
        - sri_record_id
        - status
        - legal_name
        - org_type
        - addressee
        - address_line_1
        - address_line_2
        - city
        - province
        - postal_code
        - country
        - effective_date
        - end_date

    - description: Green Supplier
      schema:
        name: pspc-sri.green-supplier
        version: 1.0.0
        attributes:
        - legal_entity_id
        - status
        - effective_date
        - end_date

    - description: Women-Owned Supplier
      schema:
        name: pspc-sri.women-owned-supplier
        version: 1.0.0
        attributes:
        - legal_entity_id
        - status
        - effective_date
        - end_date

    - description: Vendor Performance Evaluation
      schema:
        name: pspc-sri.gc-vendor-performance
        version: 1.0.0
        attributes:
        - legal_entity_id
        - score
        - status
        - effective_date
        - end_date

  SRI-CISD:
    jurisdiction:
      name: Public Services and Procurement Canada
      abbreviation: PSPC

    name: Canadian Industrial Security Directorate
    abbreviation: CISD
    url: "https://www.tpsgc-pwgsc.gc.ca/esc-src/index-eng.html"

    wallet_seed: $WALLET_SEED_CISD
    claim_types:

    - description: Designated Organization Screening
      schema:
        name: pspc-sri.designated-organization-screening
        version: 1.0.0
        attributes:
        - legal_entity_id
        - type
        - status
        - effective_date
        - end_date

    - description: Facility Security Clearance
      schema:
        name: pspc-sri.facility-security-clearance
        version: 1.0.0
        attributes:
        - legal_entity_id
        - level
        - status
        - effective_date
        - end_date

  SRI-INAC:
    jurisdiction:
      name:  Aboriginal Affairs and Northern Development Canada
      abbreviation: AANDC
      # url: http://www.aadnc-aandc.gc.ca

    name: Indigenous and Northern Affairs Canada
    abbreviation: INAC
    url: "https://www.canada.ca/en/indigenous-northern-affairs.html"

    wallet_seed: $WALLET_SEED_INAC
    claim_types:

    - description: Aboriginal Business
      schema:
        name: isc-inac.aboriginal-business
        version: 1.0.0
        attributes:
        - legal_entity_id
        - status
        - effective_date
        - end_date

static:
  assets:
    target: ../sri/assets

forms:
  women-owned:
    path: /women-owned
    type: submit-claim
    schema_name: pspc-sri.women-owned-supplier
    page_title: Women-Owned Supplier
    title: Woman-Owned Business Certification
    template: sri.index.html
    description: "Use the form below to obtain a Women-Owned Business Certification for your business."
    explanation: ""

    proof_request:
      name: registration

    js_includes:
    - src: js/sri.js

    hidden_fields:
    - name: legal_entity_id

    fields:
    - name: contact_first_name
      label: Contact First Name
      type: text
      required: true

    - name: contact_last_name
      label: Contact Last Name
      type: text
      required: true

    - name: contact_email_address
      label: Contact Email Address
      type: email
      required: true

    - name: contact_phone_number
      label: Contact Phone Number
      type: phone
      required: true

    - name: legal_name
      label: Legal Name
      type: text
      required: true

    - name: address
      label: Mailing Address
      type: address
      required: true

    mapping:
      attributes:
      - name: legal_entity_id
        from: proof

      - name: status
        from: literal
        source: Active

      - name: effective_date
        from: helper
        source: now

      - name: end_date
        from: literal
        source: null


proof_requests:
  registration:
    version: 1.0.0
    filters:
    - legal_entity_id
    schemas:
    - key:
        name: pspc-sri.gc-vendor-credential
        version: 1.0.5
      attributes:
      - legal_entity_id
      - sri_record_id
      - status
      - legal_name
      - org_type
      - addressee
      - address_line_1
      - address_line_2
      - city
      - province
      - postal_code
      - country
      - effective_date
      - end_date


logging:
  default:
    version: 1
    disable_existing_loggers: false

    formatters:
      access:
        format: "%(asctime)s %(levelname)s [%(host)s]: %(request)s %(status)d %(message)s"
      simple:
        format: '%(asctime)s %(levelname)s [%(name)s]: %(message)s'

    handlers:
      access:
        class: logging.StreamHandler
        level: DEBUG
        formatter: access
        stream: ext://sys.stdout
      console:
        class: logging.StreamHandler
        level: DEBUG
        formatter: simple
        stream: ext://sys.stdout

    loggers:
      asyncio:
        level: WARNING
      indy.libindy:
        level: ERROR
        handlers: [console]
        propagate: false
      app.services.prover:
        level: DEBUG
        handlers: [console]
        propagate: false
      sanic.access:
        level: INFO
        handlers: [access]
        propagate: false
      sanic.error:
        level: INFO
        handlers: [access]
        propagate: false
      root:
        # sanic root logger
        level: WARNING
        handlers: [console]
        propagate: false

    root:
      level: INFO
      handlers: [console]
